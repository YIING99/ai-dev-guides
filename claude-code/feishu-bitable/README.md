# 让 AI 拥有「长期记忆」：Claude Code 接入飞书多维表格全攻略

> 你有没有遇到过这样的场景——
>
> 上周和 AI 一起排查了一个棘手的 bug，过程中总结了很多经验。
> 这周又遇到类似问题，却怎么也想不起来当时是怎么解决的。
>
> **如果 AI 能帮你把每次的经验自动存到一个知识库，下次遇到问题直接问它调出来呢？**
>
> 这篇教程教你用 8 分钟搭建这样一个系统。

---

## 先看效果

配置完成后，你和 AI 的对话会变成这样：

**存入经验：**

> 你：「把今天修服务器的过程存到飞书」
>
> AI：已存入飞书知识库，分类为"故障排查"，标签：服务器、Telegram。

**调取经验：**

> 你：「上次 API 报 401 错误是怎么解决的？」
>
> AI：找到 1 条相关记录——根因是认证配置文件中存在多个 profile，OpenClaw 会轮询尝试，删除无效 profile 后恢复正常。

**这就是今天要搭建的东西。**

---

## 原理说一句就懂

```
你说话 → Claude Code → 飞书 MCP 插件 → 飞书多维表格
                         （自动翻译）      （你的知识库）
```

MCP 是一个「翻译插件」，让 Claude Code 能直接读写飞书。你不需要理解它的技术细节，只要把它装上就行。

---

## 开始之前，准备 3 样东西

请确认你手边有：

| 序号 | 准备什么 | 在哪里获取 | 没有怎么办 |
|:----:|---------|-----------|-----------|
| 1 | 飞书账号 | feishu.cn 注册 | 个人版免费，1 分钟注册 |
| 2 | Claude Code | 已安装在电脑上 | 参考 Anthropic 官方文档安装 |
| 3 | Node.js | nodejs.org 下载 | 安装 LTS 版本即可 |

准备好了？开始。

---

## 全流程只有 5 步

> 下面用颜色标注了每一步由谁来做：
>
> **「你来做」** = 需要你手动在网页/App 上操作（AI 无法替代）
>
> **「AI 来做」** = 你只需要把信息告诉 AI，它自动完成

```
第 1 步  创建飞书应用 ................ 你来做（5 分钟）
第 2 步  创建知识库表格并授权 ........ 你来做（3 分钟）
第 3 步  初始化表格字段 .............. AI 来做
第 4 步  安装飞书插件 ................ AI 来做
第 5 步  重启 Claude Code ............ 你来做（10 秒）
```

---

## 第 1 步：创建飞书应用「你来做」

> 为什么需要这一步？
> 飞书不允许任何人随便读写你的数据。你需要创建一个「应用」，相当于给 AI 发一张通行证。

### 1.1 打开飞书开放平台

浏览器访问 **open.feishu.cn** → 用飞书账号登录 → 进入「开发者后台」

### 1.2 创建应用

点击页面上的 **「创建应用」** 按钮 → 选择 **「自建应用」**

填写以下内容（都可以随便写）：

```
应用名称：  我的知识库助手
应用描述：  AI 知识库读写
```

点击「创建」。

### 1.3 开通权限

创建成功后，你会进入应用的管理页面。

在左侧菜单中找到 **「权限管理」**，点进去：

1. 在搜索框输入 **bitable**
2. 找到 **「查看、评论和编辑多维表格」**（权限标识是 `bitable:app`）
3. 点击 **「开通」**

### 1.4 开启机器人

在左侧菜单中找到 **「应用能力」**，点进去：

1. 找到 **「机器人」** 这一项
2. 点击 **「开启」**

> 为什么要开启机器人？
> 后面授权的时候，飞书只认识「人」和「机器人」，不认识「应用」。开启机器人能力，你的应用才能出现在飞书的搜索里。

### 1.5 发布应用

在左侧菜单中找到 **「版本管理与发布」**：

1. 点击 **「创建版本」**
2. 版本号填 `1.0.0`，更新说明填「初始版本」
3. 点击 **「发布」**

> 注意：每次修改了权限之后，都需要重新创建版本并发布，新权限才会生效。

### 1.6 记下通行证信息

回到左侧菜单的 **「凭证与基础信息」** 页面，复制两个值：

```
App ID：     cli_xxxxxxxxxxxxxxx    （应用的身份证号）
App Secret： xxxxxxxxxxxxxxxxxxxxxxx （应用的密码）
```

把它们保存到一个安全的地方，后面要用。

---

## 第 2 步：创建知识库表格并授权「你来做」

### 2.1 创建多维表格

打开飞书客户端（网页版或桌面版）：

1. 进入 **「云文档」**
2. 点击 **「新建」** → 选择 **「多维表格」**
3. 给它起个名字：**AI 知识库**

创建好之后，看一眼浏览器地址栏，里面藏着两个重要的值：

```
https://xxx.feishu.cn/base/LE5xb5xxxxx?table=tblxxxxx&view=vewxxxxx
                              ↑                  ↑
                          App Token           Table ID
                       （base/后面的）     （table=后面的）
```

把这两个值也记下来。

### 2.2 授权三连：建群 → 加机器人 → 分享

> 这是整个流程中最关键的一步，也是最容易卡住的地方。
>
> 飞书的分享功能只能搜索到「人」和「群」，搜不到「应用」。
> 所以我们需要用一个群作为中间桥梁，把应用和表格连接起来。

**第一步：建群**

飞书消息页 → 右上角 **「+」** → **「创建群组」** → 群名叫 **「知识库API」** → 只有你自己也行 → 创建

**第二步：加机器人进群**

进入刚创建的群 → 点击顶部的 **群名称** → 找到 **「群机器人」** → **「添加机器人」** → 搜索 **「我的知识库助手」** → 添加

**第三步：分享表格给群**

打开刚才创建的多维表格 → 右上角 **「分享」** → 搜索 **「知识库API」**（群名） → 权限选 **「可编辑」** → 确认

### 2.3 核对你的 4 把钥匙

到这里，你手上应该有 4 个值。后面全部交给 AI，你只需要把这 4 个值告诉它：

```
App ID：      cli_xxxxxxxxxxxxxxx
App Secret：  xxxxxxxxxxxxxxxxxxxxxxx
App Token：   LE5xbxxxxxxxxxxxxxxx
Table ID：    tblxxxxxxxxxxxxxxx
```

---

## 第 3 步：初始化表格字段「AI 来做」

> 从这一步开始，你不需要做任何操作，只要把信息给 AI 就行。

打开 Claude Code，把下面这段话复制粘贴给它（把 4 个 xxx 换成你自己的值）：

---

**复制这段提示词：**

```
帮我初始化飞书多维表格作为知识库。

飞书凭证：
- App ID: xxx
- App Secret: xxx
- App Token: xxx
- Table ID: xxx

请创建以下字段：
- 类型（单选）：故障排查、架构备案、技术选型、操作手册
- 日期（日期）
- 相关系统（多选）：自定义
- 标签（多选）
- 问题背景（长文本）
- 解决方案（长文本）
- 关键命令（长文本）
- 教训注意（长文本）
- 状态（单选）：有效、已过期、待验证

用 Python 脚本调用飞书 API 完成。
macOS 注意处理 SSL 证书和代理问题。
完成后插入一条测试记录。
```

---

AI 会自动写一个 Python 脚本并执行。执行完后，回到飞书刷新多维表格，你应该能看到所有字段已经创建好了，还有一条测试记录。

---

## 第 4 步：安装飞书插件「AI 来做」

继续在 Claude Code 中说：

---

**复制这段提示词：**

```
帮我配置飞书 MCP Server。

飞书凭证：
- App ID: xxx
- App Secret: xxx

请修改 ~/.mcp-config.json，添加飞书官方 MCP（@larksuiteoapi/lark-mcp）。
如果我有代理设置，请为飞书设置 NO_PROXY 绕过代理。
```

---

AI 会自动修改配置文件，把飞书插件加进去。

---

## 第 5 步：重启 Claude Code「你来做」

关闭 Claude Code，重新打开。

启动后，试试说：

> 「帮我查一下飞书知识库里有什么记录」

如果 AI 能读到你之前的测试记录，说明**全部配置成功**。

---

## 搞定了！日常怎么用？

以后你只需要用自然语言和 AI 对话，它就会自动操作你的知识库：

### 存知识

> 「把今天排查 API 超时的过程存到飞书，类型是故障排查」

### 查知识

> 「之前遇到过 SSL 证书的问题吗？帮我查一下飞书」

### 改状态

> 「把飞书里那条旧的部署方案标记为已过期」

### 批量整理

> 「帮我把这周所有对话中的技术决策整理成知识条目，存到飞书」

---

## 遇到问题？看这里

| 你遇到的情况 | 原因 | 解决办法 |
|-------------|------|---------|
| AI 说「连不上飞书」 | 代理拦截了请求 | 确认 MCP 配置里有 `NO_PROXY` 设置 |
| API 报 Forbidden | 应用没有写入权限 | 检查是否开通了 `bitable:app`（不是 readonly） |
| 分享时搜不到应用名 | 飞书只认群和人 | 按「授权三连」操作：建群→加机器人→分享给群 |
| 权限改了但不生效 | 没重新发布 | 回开放平台「创建版本」→「发布」 |
| 重启后 MCP 没加载 | 配置文件格式错误 | 让 AI 检查 `~/.mcp-config.json` 语法 |

---

## 总结

```
整个过程你只做了 3 件事：

  1. 在飞书开放平台点了几下按钮（创建应用、开权限）
  2. 在飞书里建了个群，做了个分享
  3. 重启了一下 Claude Code

其余全部由 AI 自动完成。

从此以后，你的每一次排查、每一个决策、每一条经验，
都可以一句话存进飞书，再也不会丢失。
```

---

*作者：大王 | 公众号：持续进化营*
*本教程基于 2026-02-14 实际接入过程整理*
*飞书 MCP 插件：@larksuiteoapi/lark-mcp（飞书官方出品）*
